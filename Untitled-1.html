<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simple Room / Venue Booking</title>
  <style>
    :root{--accent:#4f46e5;--muted:#6b7280;--card:#ffffff;--bg:#f8fafc}
    *{box-sizing:border-box}
    body{font-family:Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; margin:0; background:var(--bg); color:#111}
    header{background:linear-gradient(90deg, rgba(79,70,229,0.08), rgba(99,102,241,0.04)); padding:28px 20px; display:flex; align-items:center; justify-content:space-between; gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#06b6d4);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    h1{font-size:18px;margin:0}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .container{max-width:1100px;margin:28px auto;padding:0 20px}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:20px}

    /* Rooms list */
    .rooms{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(16,24,40,0.06)}
    .room-title{display:flex;align-items:center;justify-content:space-between;gap:8px}
    .room-title h3{margin:0;font-size:16px}
    .meta{font-size:13px;color:var(--muted);margin-top:8px}
    .btn{display:inline-block;padding:8px 12px;border-radius:8px;background:var(--accent);color:white;text-decoration:none;border:none;cursor:pointer;font-weight:600}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(79,70,229,0.12)}

    /* Sidebar */
    .sidebar .card{position:sticky;top:24px}
    label{display:block;margin-top:10px;font-size:13px;color:var(--muted)}
    input,select{width:100%;padding:10px;border-radius:8px;border:1px solid #e6e9ef;margin-top:6px}
    .small{font-size:13px;color:var(--muted)}

    /* bookings list */
    .bookings{margin-top:14px}
    .booking-item{display:flex;justify-content:space-between;padding:10px;border-radius:8px;border:1px dashed #eef2ff;margin-top:10px}

    /* modal */
    .modal{position:fixed;inset:0;background:rgba(2,6,23,0.5);display:none;align-items:center;justify-content:center;padding:20px}
    .modal.open{display:flex}
    .modal-card{width:100%;max-width:640px;background:white;padding:18px;border-radius:12px}
    .row{display:flex;gap:10px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}.sidebar{order:-1}}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">RB</div>
      <div>
        <h1>Room Booking System</h1>
        <p class="lead">Select a room, choose date & time, and confirm a booking — client-side demo</p>
      </div>
    </div>
    <div>
      <button class="btn" id="openNewBooking">New booking</button>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <section>
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
          <h2 style="margin:0">Available Rooms</h2>
          <div class="small">Tip: bookings are stored in-memory (refresh clears them)</div>
        </div>

        <div class="rooms" id="roomsList">
          <!--room cards injected by JS -->
        <!--</div>

        <div class="card" style="margin-top:18px">
          <h3 style="margin:0 0 8px 0">All Bookings</h3>
          <div id="allBookings" class="bookings small">No bookings yet.</div>
        </div>
      </section>

      <aside class="sidebar">
        <div class="card">
          <h3 style="margin:0">Quick Book</h3>
          <p class="small">Use the form below to make a quick booking.</p>

          <label for="roomSelect">Room</label>
          <select id="roomSelect"></select>

          <label for="date">Date</label>
          <input type="date" id="date" />

          <div class="row" style="margin-top:6px">
            <div style="flex:1">
              <label for="start">Start time</label>
              <input type="time" id="start" />
            </div>
            <div style="flex:1">
              <label for="end">End time</label>
              <input type="time" id="end" />
            </div>
          </div>

          <label for="name">Your name</label>
          <input id="name" placeholder="Full name" />

          <label for="email">Email</label>
          <input id="email" placeholder="you@example.com" />

          <div style="margin-top:12px;display:flex;gap:8px">
            <button class="btn" id="quickBook">Book</button>
            <button class="btn ghost" id="clearBookings">Clear all</button>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <!-- modal for details -->
  <!--<div class="modal" id="modal">
    <div class="modal-card">
      <h3 id="modalTitle">New Booking</h3>
      <div style="margin-top:8px">
        <label>Room</label>
        <select id="mRoom"></select>
        <div class="row">
          <div style="flex:1">
            <label>Date</label>
            <input type="date" id="mDate" />
          </div>
          <div style="flex:1">
            <label>Start</label>
            <input type="time" id="mStart" />
          </div>
        </div>
        <div class="row">
          <div style="flex:1">
            <label>End</label>
            <input type="time" id="mEnd" />
          </div>
          <div style="flex:1">
            <label>&nbsp;</label>
            <input id="mName" placeholder="Your full name" />
          </div>
        </div>
        <label>Email</label>
        <input id="mEmail" placeholder="you@example.com" />

        <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
          <button class="btn" id="confirmBooking">Confirm</button>
          <button class="btn ghost" id="cancelModal">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Demo data
    const rooms = [
      {id:'R1', name:'Conference Room A', capacity:20, features:['Projector','Whiteboard']},
      {id:'R2', name:'Meeting Room B', capacity:8, features:['TV Screen']},
      {id:'R3', name:'Banquet Hall', capacity:120, features:['Stage','Sound System']},
      {id:'R4', name:'Huddle Pod', capacity:4, features:['Video Call Kit']}
    ];

    // in-memory bookings
    const bookings = [];

    // Utilities
    function timeToMinutes(t){ // 'HH:MM' -> minutes
      if(!t) return null;
      const [h,m]=t.split(':').map(Number); return h*60 + m;
    }

    function overlaps(b1, b2){
      // require same room and same date
      if(b1.room !== b2.room || b1.date !== b2.date) return false;
      return !(timeToMinutes(b1.end) <= timeToMinutes(b2.start) || timeToMinutes(b2.end) <= timeToMinutes(b1.start));
    }

    // render rooms
    function renderRooms(){
      const el = document.getElementById('roomsList'); el.innerHTML='';
      rooms.forEach(r=>{
        const card = document.createElement('div'); card.className='card';
        card.innerHTML = `
          <div class="room-title"><h3>${r.name}</h3><div class="small">Cap: ${r.capacity}</div></div>
          <div class="meta">${r.features.join(' • ')}</div>
          <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
            <button class="btn" data-room="${r.id}">Book</button>
            <button class="btn ghost" data-room-info="${r.id}">Info</button>
          </div>
        `;
        el.appendChild(card);
      });

      // bind book buttons
      document.querySelectorAll('[data-room]').forEach(btn=> btn.addEventListener('click', e=>openModal(e.target.dataset.room)));
      document.querySelectorAll('[data-room-info]').forEach(btn=> btn.addEventListener('click', e=>{
        const id = e.target.dataset.roomInfo; const rr = rooms.find(x=>x.id===id);
        alert(rr.name + "\nCapacity: " + rr.capacity + "\nFeatures: " + rr.features.join(', '));
      }));
    }

    // render sidebar selects
    function populateSelects(){
      const sel = document.getElementById('roomSelect'); const msel = document.getElementById('mRoom');
      sel.innerHTML = rooms.map(r=>`<option value="${r.id}">${r.name}</option>`).join('');
      msel.innerHTML = sel.innerHTML;
    }

    function renderBookings(){
      const el = document.getElementById('allBookings');
      if(bookings.length===0){ el.innerHTML='No bookings yet.'; return }
      el.innerHTML='';
      bookings.slice().reverse().forEach(b=>{
        const div = document.createElement('div'); div.className='booking-item';
        div.innerHTML = `<div><strong>${b.roomName}</strong><div class="small">${b.date} • ${b.start} - ${b.end}</div><div class="small">${b.name} • ${b.email}</div></div>
                         <div style="display:flex;flex-direction:column;gap:6px"><button class="btn ghost" data-cancel="${b.id}">Cancel</button></div>`;
        el.appendChild(div);
      });
      document.querySelectorAll('[data-cancel]').forEach(btn=>btn.addEventListener('click', e=>{
        const id = e.target.dataset.cancel; const idx = bookings.findIndex(x=>x.id===id);
        if(idx>-1){ bookings.splice(idx,1); renderBookings(); alert('Booking cancelled'); }
      }));
    }

    // simple id generator
    function uid(){ return 'B' + Math.random().toString(36).slice(2,9).toUpperCase(); }

    // booking validator & creator
    function tryCreateBooking(data){
      // basic validation
      if(!data.room || !data.date || !data.start || !data.end || !data.name || !data.email) return {ok:false,msg:'Please fill all fields.'};
      if(timeToMinutes(data.end) <= timeToMinutes(data.start)) return {ok:false,msg:'End time must be after start time.'};

      // conflict check
      const conflict = bookings.find(b=>overlaps(b,data));
      if(conflict) return {ok:false,msg:`Conflict with existing booking (${conflict.name} ${conflict.start}-${conflict.end}).`};

      // all good
      const roomInfo = rooms.find(r=>r.id===data.room);
      const booking = Object.assign({}, data, {id:uid(), roomName: roomInfo.name});
      bookings.push(booking);
      renderBookings();
      return {ok:true,booking};
    }

    // modal handling
    const modal = document.getElementById('modal');
    function openModal(roomId){
      document.getElementById('mRoom').value = roomId || rooms[0].id;
      modal.classList.add('open');
    }
    function closeModal(){ modal.classList.remove('open'); }

    // wire up quick book
    document.getElementById('quickBook').addEventListener('click', ()=>{
      const data = {
        room: document.getElementById('roomSelect').value,
        date: document.getElementById('date').value,
        start: document.getElementById('start').value,
        end: document.getElementById('end').value,
        name: document.getElementById('name').value.trim(),
        email: document.getElementById('email').value.trim()
      };
      const res = tryCreateBooking(data);
      if(!res.ok) return alert(res.msg);
      alert('Booking confirmed for ' + res.booking.roomName + ' on ' + res.booking.date + ' ' + res.booking.start + '-' + res.booking.end);
    });

    document.getElementById('openNewBooking').addEventListener('click', ()=>openModal());
    document.getElementById('cancelModal').addEventListener('click', closeModal);
    document.getElementById('confirmBooking').addEventListener('click', ()=>{
      const data = {
        room: document.getElementById('mRoom').value,
        date: document.getElementById('mDate').value,
        start: document.getElementById('mStart').value,
        end: document.getElementById('mEnd').value,
        name: document.getElementById('mName').value.trim(),
        email: document.getElementById('mEmail').value.trim()
      };
      const res = tryCreateBooking(data);
      if(!res.ok) return alert(res.msg);
      closeModal();
      alert('Booking confirmed!');
    });

    document.getElementById('clearBookings').addEventListener('click', ()=>{
      if(!confirm('Clear all bookings? This cannot be undone in this demo.')) return;
      bookings.length = 0; renderBookings();
    });

    // init
    renderRooms(); populateSelects(); renderBookings();
  </script>
</body>
</html>